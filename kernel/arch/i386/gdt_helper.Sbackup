.global _gdt_flush

_gdt_flush:
 #  move eax, [esp+4]
   movl 4(%esp), %eax
   #lgdt[eax]
   lgdt (%eax)
   #move ax, 0x10
   mov $0x10, %ax
   #move ds, ax
   mov %ax, %ds
   #move es, ax
   mov %ax, %es
   #move fs, ax
   mov %ax, %fs
   #move gs, ax
   mov %ax, %gs
   #move ss, ax
   mov %ax, %ss
   #jmp 0x08:.flush
   jmp $0x08, $flush
 flush:
   ret

